{"version":3,"sources":["../src/MultiOptionsPolyline.js"],"names":["MultiOptionsPolyline","L","FeatureGroup","extend","initialize","latlngs","options","copyBaseOptions","multiOptions","_layers","_options","undefined","_copyBaseOptions","setLatLngs","baseOptions","optionsArray","i","len","length","optionIdxFn","fnContext","prevOptionIdx","optionIdx","segmentLatlngs","_originalLatlngs","eachLayer","layer","removeLayer","call","push","addLayer","polyline","getLatLngs","getLatLngsSegments","multiOptionsPolyline"],"mappings":"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","file":"MultiOptionsPolyline.js","sourcesContent":["/*\r\n * L.MultiOptionsPolyline is a MultiPolyLine which parts can be styled differently.\r\n * options: {\r\n *     multiOptions: {\r\n *         optionIdxFn: function (latLng, prevLatLng, index, allLatlngs),\r\n *         fnContext: ctx, // the context to call optionIdxFn (optional)\r\n *         options: [{}, {}, {}] or function, // options for the index returned by optionIdxFn. If supplied with a function then it will be called with the index\r\n *         copyBaseOptions: true\r\n *     },\r\n *     // other options from Polyline\r\n * }\r\n */\r\nvar MultiOptionsPolyline = L.FeatureGroup.extend({\r\n\r\n    initialize: function (latlngs, options) {\r\n        var copyBaseOptions = options.multiOptions.copyBaseOptions;\r\n\r\n        this._layers = {};\r\n        this._options = options;\r\n        if (copyBaseOptions === undefined || copyBaseOptions) {\r\n            this._copyBaseOptions();\r\n        }\r\n\r\n        this.setLatLngs(latlngs);\r\n    },\r\n\r\n    _copyBaseOptions: function () {\r\n        var multiOptions = this._options.multiOptions,\r\n            baseOptions,\r\n            optionsArray = multiOptions.options,\r\n            i, len = optionsArray.length;\r\n\r\n        baseOptions = L.extend({}, this._options);\r\n        delete baseOptions.multiOptions;\r\n\r\n        for (i = 0; i < len; ++i) {\r\n            optionsArray[i] = L.extend({}, baseOptions, optionsArray[i]);\r\n        }\r\n    },\r\n\r\n    setLatLngs: function (latlngs) {\r\n        var i, len = latlngs.length,\r\n            multiOptions = this._options.multiOptions,\r\n            optionIdxFn = multiOptions.optionIdxFn,\r\n            fnContext = multiOptions.fnContext || this,\r\n            prevOptionIdx, optionIdx,\r\n            segmentLatlngs;\r\n\r\n        this._originalLatlngs = latlngs;\r\n\r\n        this.eachLayer(function (layer) {\r\n            this.removeLayer(layer);\r\n        }, this);\r\n\r\n        for (i = 1; i < len; ++i) {\r\n            optionIdx = optionIdxFn.call(\r\n                fnContext, latlngs[i], latlngs[i - 1], i, latlngs);\r\n\r\n            if (i === 1) {\r\n                segmentLatlngs = [latlngs[0]];\r\n                prevOptionIdx = optionIdxFn.call(fnContext, latlngs[0], latlngs[0], 0, latlngs);\r\n            }\r\n\r\n            segmentLatlngs.push(latlngs[i]);\r\n\r\n            // is there a change in options or is it the last point?\r\n            if (prevOptionIdx !== optionIdx || i === len - 1) {\r\n                // Check if options is a function or an array\r\n                if (typeof multiOptions.options === \"function\") {\r\n                    this.addLayer(L.polyline(segmentLatlngs, multiOptions.options(prevOptionIdx)));\r\n                } else {\r\n                    this.addLayer(L.polyline(segmentLatlngs, multiOptions.options[prevOptionIdx]));\r\n                }\r\n\r\n                prevOptionIdx = optionIdx;\r\n                segmentLatlngs = [latlngs[i]];\r\n            }\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    getLatLngs: function () {\r\n        return this._originalLatlngs;\r\n    },\r\n\r\n    getLatLngsSegments: function () {\r\n        var latlngs = [];\r\n\r\n        this.eachLayer(function (layer) {\r\n            latlngs.push(layer.getLatLngs());\r\n        });\r\n\r\n        return latlngs;\r\n    }\r\n});\r\n\r\nL.MultiOptionsPolyline = MultiOptionsPolyline;\r\nL.multiOptionsPolyline = function (latlngs, options) {\r\n    return new MultiOptionsPolyline(latlngs, options);\r\n};"]}