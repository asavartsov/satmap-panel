{"version":3,"sources":["../src/MultiOptionsPolyline.js"],"names":[],"mappings":"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","file":"MultiOptionsPolyline.js","sourcesContent":["/*\n * L.MultiOptionsPolyline is a MultiPolyLine which parts can be styled differently.\n * options: {\n *     multiOptions: {\n *         optionIdxFn: function (latLng, prevLatLng, index, allLatlngs),\n *         fnContext: ctx, // the context to call optionIdxFn (optional)\n *         options: [{}, {}, {}] or function, // options for the index returned by optionIdxFn. If supplied with a function then it will be called with the index\n *         copyBaseOptions: true\n *     },\n *     // other options from Polyline\n * }\n */\nvar MultiOptionsPolyline = L.FeatureGroup.extend({\n\n    initialize: function (latlngs, options) {\n        var copyBaseOptions = options.multiOptions.copyBaseOptions;\n\n        this._layers = {};\n        this._options = options;\n        if (copyBaseOptions === undefined || copyBaseOptions) {\n            this._copyBaseOptions();\n        }\n\n        this.setLatLngs(latlngs);\n    },\n\n    _copyBaseOptions: function () {\n        var multiOptions = this._options.multiOptions,\n            baseOptions,\n            optionsArray = multiOptions.options,\n            i, len = optionsArray.length;\n\n        baseOptions = L.extend({}, this._options);\n        delete baseOptions.multiOptions;\n\n        for (i = 0; i < len; ++i) {\n            optionsArray[i] = L.extend({}, baseOptions, optionsArray[i]);\n        }\n    },\n\n    setLatLngs: function (latlngs) {\n        var i, len = latlngs.length,\n            multiOptions = this._options.multiOptions,\n            optionIdxFn = multiOptions.optionIdxFn,\n            fnContext = multiOptions.fnContext || this,\n            prevOptionIdx, optionIdx,\n            segmentLatlngs;\n\n        this._originalLatlngs = latlngs;\n\n        this.eachLayer(function (layer) {\n            this.removeLayer(layer);\n        }, this);\n\n        for (i = 1; i < len; ++i) {\n            optionIdx = optionIdxFn.call(\n                fnContext, latlngs[i], latlngs[i - 1], i, latlngs);\n\n            if (i === 1) {\n                segmentLatlngs = [latlngs[0]];\n                prevOptionIdx = optionIdxFn.call(fnContext, latlngs[0], latlngs[0], 0, latlngs);\n            }\n\n            segmentLatlngs.push(latlngs[i]);\n\n            // is there a change in options or is it the last point?\n            if (prevOptionIdx !== optionIdx || i === len - 1) {\n                // Check if options is a function or an array\n                if (typeof multiOptions.options === \"function\") {\n                    this.addLayer(L.polyline(segmentLatlngs, multiOptions.options(prevOptionIdx)));\n                } else {\n                    this.addLayer(L.polyline(segmentLatlngs, multiOptions.options[prevOptionIdx]));\n                }\n\n                prevOptionIdx = optionIdx;\n                segmentLatlngs = [latlngs[i]];\n            }\n        }\n\n        return this;\n    },\n\n    getLatLngs: function () {\n        return this._originalLatlngs;\n    },\n\n    getLatLngsSegments: function () {\n        var latlngs = [];\n\n        this.eachLayer(function (layer) {\n            latlngs.push(layer.getLatLngs());\n        });\n\n        return latlngs;\n    }\n});\n\nL.MultiOptionsPolyline = MultiOptionsPolyline;\nL.multiOptionsPolyline = function (latlngs, options) {\n    return new MultiOptionsPolyline(latlngs, options);\n};"]}