{"version":3,"sources":["../src/circulus.js"],"names":["circulus","canvas","centerOrigin","ctx","getContext","translate","width","height","save","call","arguments","restore","apply","drawImage","image","angle","r","w","h","x","Math","cos","y","sin","createLinearGradient","angle1","r1","angle2","r2","x1","y1","x2","y2","createRadialGradient","radius1","radius2","createPattern","moveTo","lineTo","quadraticCurveTo","cpAngle","cpR","cpX","cpY","bezierCurveTo","cp1Angle","cp1R","cp2Angle","cp2R","cp1x","cp1y","cp2x","cp2y","arcTo","radius","arc","startAngle","endAngle","anticlockwise","rect","isPointInPath","fillTextCentered","text","offset","maxWidth","m","measureText","fillText","strokeText","clearRect","fillRectCentered","fillRect","strokeRect","getImageData","putImageData","imageData","dirtyAngle","dirtyR","dirtyWidth","dirtyHeight","dirtyX","dirtyY","clearCanvas","setTransform","beginPath","closePath","fill","stroke","clip","createImageData","degToRad","deg","PI","radToDeg","rad","font","textAlign","textBaseline","context"],"mappings":"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","file":"circulus.js","sourcesContent":["export default function circulus( canvas, centerOrigin ) {\n  if( !canvas ) throw \"Circulus: You didn't define a canvas!\";\n  var ctx = canvas.getContext(\"2d\");\n  if( centerOrigin !== false ) ctx.translate( canvas.width/2, canvas.height/2 );\n\n  var save = function() {\n    return ctx.save.call(ctx, arguments);\n  };\n\n  var restore = function() {\n    return ctx.restore.apply(ctx, arguments);\n  };\n\n\n  var drawImage = function( image, angle, r, w, h ) {\n    var x = Math.cos( angle )*r;\n    var y = Math.sin( angle )*r;\n    return ctx.drawImage( image, x, y, w, h );\n  };\n\n  var createLinearGradient = function( angle1, r1, angle2, r2 ) {\n    var x1 = Math.cos( angle1 )*r1;\n    var y1 = Math.sin( angle1 )*r1;\n    var x2 = Math.cos( angle2 )*r2;\n    var y2 = Math.sin( angle2 )*r2;\n    return ctx.createLinearGradient( x1, y1, x2, y2 );\n  };\n\n  var createRadialGradient = function( angle1, r1, radius1, angle2, r2, radius2 ) {\n    var x1 = Math.cos( angle1 )*r1;\n    var y1 = Math.sin( angle1 )*r1;\n    var x2 = Math.cos( angle2 )*r2;\n    var y2 = Math.sin( angle2 )*r2;\n    return ctx.createRadialGradient( x1, y1, radius1, x2, y2, radius2 );\n  };\n\n  var createPattern = function() {\n    return ctx.createPattern.apply( ctx, arguments );\n  };\n\n  var moveTo = function( angle, r ) {\n    var x = Math.cos( angle )*r;\n    var y = Math.sin( angle )*r;\n    return ctx.moveTo(x, y);\n  };\n\n  var lineTo = function( angle, r ) {\n    var x = Math.cos( angle )*r;\n    var y = Math.sin( angle )*r;\n    return ctx.lineTo( x, y );\n  };\n\n  var quadraticCurveTo = function( cpAngle, cpR, angle, r ) {\n    var cpX = Math.cos( angle )*cpR;\n    var cpY = Math.sin( angle )*cpR;\n    var x = Math.cos( angle )*r;\n    var y = Math.sin( angle )*r;\n    return ctx.quadraticCurveTo( cpX, cpY, x, y );\n  };\n\n  var bezierCurveTo = function( cp1Angle, cp1R, cp2Angle, cp2R, angle, r ) {\n    var cp1x = Math.cos( angle )*cp1R;\n    var cp1y = Math.sin( angle )*cp1R;\n    var cp2x = Math.cos( angle )*cp2R;\n    var cp2y = Math.sin( angle )*cp2R;\n    var x = Math.cos( angle )*r;\n    var y = Math.sin( angle )*r;\n    return ctx.bezierCurveTo( cp1x, cp1y, cp2x, cp2y, x, y );\n  };\n\n  var arcTo = function( angle1, r1, angle2, r2, radius ) {\n    var x1 = Math.cos( angle1 )*r1;\n    var y1 = Math.sin( angle1 )*r1;\n    var x2 = Math.cos( angle2 )*r2;\n    var y2 = Math.sin( angle2 )*r2;\n    return ctx.arcTo( x1, y1, x2, y2, radius );\n  };\n\n  var arc = function( angle, r, radius, startAngle, endAngle, anticlockwise ) {\n    var x = Math.cos( angle )*r;\n    var y = Math.sin( angle )*r;\n    return ctx.arc( x, y, radius, startAngle, endAngle, anticlockwise );\n  };\n\n  var rect = function( angle, r, w, h ) {\n    var x = Math.cos( angle )*r;\n    var y = Math.sin( angle )*r;\n    return ctx.rect( x, y, w, h );\n  };\n\n  var isPointInPath = function( angle, r ) {\n    var x = Math.cos( angle )*r;\n    var y = Math.sin( angle )*r;\n    return ctx.isPointInPath( x, y );\n  };\n\n\n  var fillTextCentered = function( text, angle, r, offset, maxWidth) {\n    var x = Math.cos( angle )*r;\n    var y = Math.sin( angle )*r;\n    var m = this.measureText(text);\n    return ctx.fillText( text, x - m.width/2, y + (offset || 0), maxWidth );\n  };\n\n  var fillText = function( text, angle, r, maxWidth) {\n    var x = Math.cos( angle )*r;\n    var y = Math.sin( angle )*r;\n    return ctx.fillText( text, x, y , maxWidth );\n  };\n\n  var strokeText = function( text, angle, r, maxWidth ) {\n    var x = Math.cos( angle )*r;\n    var y = Math.sin( angle )*r;\n    return ctx.strokeText( text, x, y, maxWidth);\n  };\n\n  var clearRect = function( angle, r, w, h ) {\n    var x = Math.cos( angle )*r;\n    var y = Math.sin( angle )*r;\n    return ctx.clearRect( x, y, w, h );\n  };\n\n  var fillRectCentered = function( angle, r, width, height ) {\n    var x = Math.cos( angle )*r;\n    var y = Math.sin( angle )*r;\n    return ctx.fillRect( x - width/2, y - height/2, width, height );\n  };\n\n  var fillRect = function( angle, r, width, height ) {\n    var x = Math.cos( angle )*r;\n    var y = Math.sin( angle )*r;\n    return ctx.fillRect( x, y, width, height );\n  };\n\n  var strokeRect = function( angle, r, width, height ) {\n    var x = Math.cos( angle )*r;\n    var y = Math.sin( angle )*r;\n    return ctx.strokeRect( x, y, width, height );\n  };\n\n\n  var getImageData = function( angle, r, width, height ) {\n    var x = Math.cos( angle )*r;\n    var y = Math.sin( angle )*r;\n    return ctx.getImageData( x, y, width, height );\n  };\n\n  var putImageData = function( imageData, angle, r, dirtyAngle, dirtyR, dirtyWidth, dirtyHeight ) {\n    var x = Math.cos( angle )*r;\n    var y = Math.sin( angle )*r;\n    var dirtyX = Math.cos( dirtyAngle )*dirtyR;\n    var dirtyY = Math.sin( dirtyAngle )*dirtyR;\n    return ctx.putImageData( imageData, x, y, dirtyX, dirtyY, dirtyWidth, dirtyHeight );\n  };\n\n  var clearCanvas = function() {\n    // Thanks to http://stackoverflow.com/questions/2142535/how-to-clear-the-canvas-for-redrawing\n    // Store the current transformation matrix\n    ctx.save();\n\n    // Use the identity matrix while clearing the canvas\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // Restore the transform\n    ctx.restore();\n  };\n\n  var beginPath = function() {\n    return ctx.beginPath.apply(ctx, arguments);\n  };\n\n  var closePath = function() {\n    return ctx.closePath.apply(ctx, arguments);\n  };\n\n  var fill = function() {\n    return ctx.fill.apply( ctx, arguments );\n  };\n\n  var stroke = function() {\n    return ctx.stroke.apply( ctx, arguments );\n  };\n\n  var clip = function() {\n    return ctx.clip.apply( ctx, arguments );\n  };\n\n  var measureText = function() {\n    return ctx.measureText.apply( ctx, arguments );\n  };\n\n  var createImageData = function() {\n    return ctx.createImageData.apply( ctx, arguments );\n  };\n\n\n  var degToRad = function( deg ) {\n    return deg*(Math.PI/180)\n  };\n\n  var radToDeg = function( rad ) {\n    return rad*(180/Math.PI);\n  };\n\n  return {\n    save: save,\n    restore: restore,\n\n    canvas: ctx.canvas,\n\n    drawImage: drawImage,\n\n    createLinearGradient: createLinearGradient,\n    createRadialGradient: createRadialGradient,\n    createPattern: ctx.createPattern,\n\n    beginPath: beginPath,\n    closePath: closePath,\n\n    fill: fill,\n    stroke: stroke,\n    clip: clip,\n\n    moveTo: moveTo,\n    lineTo: lineTo,\n    quadraticCurveTo: quadraticCurveTo,\n    bezierCurveTo: bezierCurveTo,\n    arcTo: arcTo,\n    arc: arc,\n    rect: rect,\n    isPointInPath: isPointInPath,\n\n    font: ctx.font,\n    textAlign: ctx.textAlign,\n    textBaseline: ctx.textBaseline,\n\n    fillTextCentered: fillTextCentered,\n    fillText: fillText,\n    strokeText: strokeText,\n    measureText: measureText,\n\n    clearRect: clearRect,\n    fillRectCentered: fillRectCentered,\n    fillRect: fillRect,\n    strokeRect: strokeRect,\n\n    createImageData: createImageData,\n    getImageData: getImageData,\n    putImageData: putImageData,\n\n    context: ctx,\n    degToRad: degToRad,\n    radToDeg: radToDeg,\n    clearCanvas: clearCanvas\n  };\n};"]}